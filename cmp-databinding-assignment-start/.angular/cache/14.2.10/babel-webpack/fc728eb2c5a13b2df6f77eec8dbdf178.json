{"ast":null,"code":"import _toConsumableArray from \"/Users/admin/learn/udemy-courses/angular-complete-guide/cmp-databinding-assignment-start/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _createForOfIteratorHelper from \"/Users/admin/learn/udemy-courses/angular-complete-guide/cmp-databinding-assignment-start/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"/Users/admin/learn/udemy-courses/angular-complete-guide/cmp-databinding-assignment-start/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/admin/learn/udemy-courses/angular-complete-guide/cmp-databinding-assignment-start/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nexport var Subscription = /*#__PURE__*/function () {\n  function Subscription(initialTeardown) {\n    _classCallCheck(this, Subscription);\n    this.initialTeardown = initialTeardown;\n    this.closed = false;\n    this._parentage = null;\n    this._finalizers = null;\n  }\n  _createClass(Subscription, [{\n    key: \"unsubscribe\",\n    value: function unsubscribe() {\n      var errors;\n      if (!this.closed) {\n        this.closed = true;\n        var _parentage = this._parentage;\n        if (_parentage) {\n          this._parentage = null;\n          if (Array.isArray(_parentage)) {\n            var _iterator = _createForOfIteratorHelper(_parentage),\n              _step;\n            try {\n              for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                var parent = _step.value;\n                parent.remove(this);\n              }\n            } catch (err) {\n              _iterator.e(err);\n            } finally {\n              _iterator.f();\n            }\n          } else {\n            _parentage.remove(this);\n          }\n        }\n        var initialFinalizer = this.initialTeardown;\n        if (isFunction(initialFinalizer)) {\n          try {\n            initialFinalizer();\n          } catch (e) {\n            errors = e instanceof UnsubscriptionError ? e.errors : [e];\n          }\n        }\n        var _finalizers = this._finalizers;\n        if (_finalizers) {\n          this._finalizers = null;\n          var _iterator2 = _createForOfIteratorHelper(_finalizers),\n            _step2;\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var finalizer = _step2.value;\n              try {\n                execFinalizer(finalizer);\n              } catch (err) {\n                errors = errors !== null && errors !== void 0 ? errors : [];\n                if (err instanceof UnsubscriptionError) {\n                  errors = [].concat(_toConsumableArray(errors), _toConsumableArray(err.errors));\n                } else {\n                  errors.push(err);\n                }\n              }\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        }\n        if (errors) {\n          throw new UnsubscriptionError(errors);\n        }\n      }\n    }\n  }, {\n    key: \"add\",\n    value: function add(teardown) {\n      var _a;\n      if (teardown && teardown !== this) {\n        if (this.closed) {\n          execFinalizer(teardown);\n        } else {\n          if (teardown instanceof Subscription) {\n            if (teardown.closed || teardown._hasParent(this)) {\n              return;\n            }\n            teardown._addParent(this);\n          }\n          (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n        }\n      }\n    }\n  }, {\n    key: \"_hasParent\",\n    value: function _hasParent(parent) {\n      var _parentage = this._parentage;\n      return _parentage === parent || Array.isArray(_parentage) && _parentage.includes(parent);\n    }\n  }, {\n    key: \"_addParent\",\n    value: function _addParent(parent) {\n      var _parentage = this._parentage;\n      this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    }\n  }, {\n    key: \"_removeParent\",\n    value: function _removeParent(parent) {\n      var _parentage = this._parentage;\n      if (_parentage === parent) {\n        this._parentage = null;\n      } else if (Array.isArray(_parentage)) {\n        arrRemove(_parentage, parent);\n      }\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(teardown) {\n      var _finalizers = this._finalizers;\n      _finalizers && arrRemove(_finalizers, teardown);\n      if (teardown instanceof Subscription) {\n        teardown._removeParent(this);\n      }\n    }\n  }]);\n  return Subscription;\n}();\nSubscription.EMPTY = function () {\n  var empty = new Subscription();\n  empty.closed = true;\n  return empty;\n}();\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n  return value instanceof Subscription || value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe);\n}\nfunction execFinalizer(finalizer) {\n  if (isFunction(finalizer)) {\n    finalizer();\n  } else {\n    finalizer.unsubscribe();\n  }\n}\n//# sourceMappingURL=Subscription.js.map","map":null,"metadata":{},"sourceType":"module"}